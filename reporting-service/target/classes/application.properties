spring.application.name=reporting-service

# Server port: local = 8083, Render = PORT
server.port=${PORT:8083}

# ---------- DB (LOCAL defaults; env can override) ----------
spring.datasource.url=${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5432/tokendb}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:postgres}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:postgres}
spring.datasource.driver-class-name=org.postgresql.Driver
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.hibernate.ddl-auto=update

# ---------- Eureka (local default) ----------
eureka.client.service-url.defaultZone=${EUREKA_CLIENT_SERVICEURL_DEFAULTZONE:http://localhost:8761/eureka}

# ---------- Thymeleaf (local) ----------
spring.thymeleaf.prefix=classpath:/templates/
spring.thymeleaf.suffix=.html
spring.thymeleaf.cache=false

# ---------- Security: resource server (local JWKS by default) ----------
# if you ever switch to issuer-uri, keep it env-overridable as well
spring.security.oauth2.resourceserver.jwt.jwk-set-uri=${SPRING_SECURITY_OAUTH2_RESOURCESERVER_JWT_JWK_SET_URI:http://localhost:8080/oauth2/jwks}

# ---------- CORS (local defaults) ----------
spring.mvc.cors.allowed-origins=${SPRING_MVC_CORS_ALLOWED_ORIGINS:http://localhost:8080}
spring.mvc.cors.allowed-methods=${SPRING_MVC_CORS_ALLOWED_METHODS:GET,POST,PUT,DELETE,OPTIONS}
spring.mvc.cors.allowed-headers=${SPRING_MVC_CORS_ALLOWED_HEADERS:*}
spring.mvc.cors.allow-credentials=${SPRING_MVC_CORS_ALLOW_CREDENTIALS:true}

# ---------- Logging (local) ----------
logging.level.org.springframework.web.cors=DEBUG
logging.level.org.springframework.security=DEBUG
spring.security.debug=true
