## Gateway Service Configuration
#server.port=8082
server.port=${PORT:8082}
spring.application.name=gateway-service

# Eureka (optional if you?re using service discovery)
eureka.client.service-url.defaultZone=http://localhost:8761/eureka
eureka.client.register-with-eureka=true
eureka.client.fetch-registry=true

# JWT validation ? must match the issuer set in oauth-service TokenService
spring.security.oauth2.resourceserver.jwt.issuer-uri=http://localhost:8080

# Explicit routes (if not using discovery locator)
spring.cloud.gateway.routes[0].id=oauth-service
spring.cloud.gateway.routes[0].uri=http://localhost:8080
spring.cloud.gateway.routes[0].predicates[0]=Path=/oauth-service/**
spring.cloud.gateway.routes[0].filters[0]=StripPrefix=1

spring.cloud.gateway.routes[1].id=reporting-service
spring.cloud.gateway.routes[1].uri=http://localhost:8083
spring.cloud.gateway.routes[1].predicates[0]=Path=/reporting-service/**
spring.cloud.gateway.routes[1].filters[0]=StripPrefix=1

spring.cloud.gateway.routes[2].id=portfolio
spring.cloud.gateway.routes[2].uri=http://localhost:8084
spring.cloud.gateway.routes[2].predicates[0]=Path=/portfolio-service/**
spring.cloud.gateway.routes[2].filters[0]=StripPrefix=1


# --- Global CORS config ---
spring.cloud.gateway.globalcors.corsConfigurations.[/**].allowedOrigins=http://localhost:8082
spring.cloud.gateway.globalcors.corsConfigurations.[/**].allowedMethods=GET,POST,PUT,DELETE,OPTIONS
spring.cloud.gateway.globalcors.corsConfigurations.[/**].allowedHeaders=*
spring.cloud.gateway.globalcors.corsConfigurations.[/**].exposedHeaders=Authorization
spring.cloud.gateway.globalcors.corsConfigurations.[/**].allowCredentials=true
