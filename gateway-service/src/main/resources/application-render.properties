spring.profiles.active=render

# ---------- Eureka on Render ----------
# discovery-service is a private service; we pass its URL via env
eureka.client.service-url.defaultZone=${EUREKA_CLIENT_SERVICEURL_DEFAULTZONE}

# ---------- JWT issuer on Render ----------
spring.security.oauth2.resourceserver.jwt.issuer-uri=${SPRING_SECURITY_OAUTH2_RESOURCESERVER_JWT_ISSUER_URI}

# ---------- Routes on Render (use service hostnames instead of localhost) ----------
# These URLs point to your private services inside Render.
# Ports here must match whatever those services listen on (likely 8080/8083/8084).

spring.cloud.gateway.routes[0].uri=${OAUTH_SERVICE_URL:http://oauth-service:8080}
spring.cloud.gateway.routes[1].uri=${REPORTING_SERVICE_URL:http://reporting-service:8083}
spring.cloud.gateway.routes[2].uri=${PORTFOLIO_SERVICE_URL:http://portfolio-service:8084}

# ---------- CORS for Render ----------
# Allow your frontend domain (or * while testing)
spring.cloud.gateway.globalcors.corsConfigurations.[/**].allowedOrigins=${CORS_ALLOWED_ORIGINS:*}
spring.cloud.gateway.globalcors.corsConfigurations.[/**].allowedMethods=${CORS_ALLOWED_METHODS:GET,POST,PUT,DELETE,OPTIONS}
spring.cloud.gateway.globalcors.corsConfigurations.[/**].allowedHeaders=${CORS_ALLOWED_HEADERS:*}
spring.cloud.gateway.globalcors.corsConfigurations.[/**].exposedHeaders=${CORS_EXPOSED_HEADERS:Authorization}
spring.cloud.gateway.globalcors.corsConfigurations.[/**].allowCredentials=${CORS_ALLOW_CREDENTIALS:true}
